# üöÄ –î–µ–ø–ª–æ–π SuperMock —Å Dokploy

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **–°–µ—Ä–≤–µ—Ä —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º Dokploy**

   - Ubuntu/Debian/CentOS
   - –ú–∏–Ω–∏–º—É–º 2GB RAM, 20GB storage
   - Dokploy —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω

2. **–î–æ–º–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞** (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ DNS –∑–∞–ø–∏—Å–∏):

   - `supermock.ru` ‚Üí IP —Å–µ—Ä–≤–µ—Ä–∞
   - `api.supermock.ru` ‚Üí IP —Å–µ—Ä–≤–µ—Ä–∞

3. **Telegram Bot Token**
   - –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/botfather)
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏ username

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Dokploy —Å–æ–∑–¥–∞–π—Ç–µ **Shared Variables** (–Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞):

```bash
# Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TELEGRAM_TOKEN=your_bot_token_here
BOT_USERNAME=your_bot_username

# JWT –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
JWT_SECRET=your_super_secret_jwt_key_change_in_production

# URL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
FRONTEND_URL=https://supermock.ru
BACKEND_URL=https://api.supermock.ru/api
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Dokploy

1. –í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å Dokploy
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç `SuperMock`
3. –î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ: `–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π`

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker Compose

1. –í –ø—Ä–æ–µ–∫—Ç–µ —Å–æ–∑–¥–∞–π—Ç–µ **Docker Compose** —Å–µ—Ä–≤–∏—Å
2. –ù–∞–∑–≤–∞–Ω–∏–µ: `supermock-app`
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. –í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –¥–µ–ø–ª–æ—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `main`)

### 4. Environment Variables

–í **Environment Variables** –¥–æ–±–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ Shared Variables:

```bash
TELEGRAM_TOKEN=${{project.TELEGRAM_TOKEN}}
BOT_USERNAME=${{project.BOT_USERNAME}}
JWT_SECRET=${{project.JWT_SECRET}}
FRONTEND_URL=${{project.FRONTEND_URL}}
BACKEND_URL=${{project.BACKEND_URL}}
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–æ–≤

#### –î–ª—è Frontend:

- **Domain**: `supermock.ru`
- **Service Name**: `frontend`
- **Port**: `80`

#### –î–ª—è Backend:

- **Domain**: `api.supermock.ru`
- **Service Name**: `backend`
- **Port**: `3001`
- **Path Prefix**: `/api`

### 6. Volumes Configuration

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ volumes –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è:

```yaml
# –í Advanced -> Volumes
../files/postgres-data:/var/lib/postgresql/data
../files/backend-logs:/app/logs
```

### 7. Health Checks

Dokploy –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç health checks –∏–∑ docker-compose.yml:

- **Frontend**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –Ω–∞ –ø–æ—Ä—Ç—É 80
- **Backend**: GET `/api/health` –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **Database**: `pg_isready` –ø—Ä–æ–≤–µ—Ä–∫–∞ PostgreSQL

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è

### GitHub Webhook

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Ä–≤–∏—Å–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ **Deployments**
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Webhook URL**
3. –í GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:
   - Settings ‚Üí Webhooks ‚Üí Add webhook
   - Paste URL
   - Trigger: Push events
   - Branch: –≤—ã–±—Ä–∞–Ω–Ω–∞—è –≤–µ—Ç–∫–∞

### GitLab/Bitbucket

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ webhook –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º Git –ø—Ä–æ–≤–∞–π–¥–µ—Ä–µ.

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

Docker Compose —Å–æ–∑–¥–∞—Å—Ç PostgreSQL —Å:

- User: `postgres`
- Password: `password`
- Database: `supermock`

### –ú–∏–≥—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–ª–æ—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ backend
npm run db:generate
npm run db:push
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ backend
npm run create-admin
```

–ë—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:

- Email: `korobprog@gmail.com`
- Password: `Krishna1284Radha`

‚ö†Ô∏è **–°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞!**

## üîí SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

Dokploy –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —á–µ—Ä–µ–∑ Let's Encrypt –¥–ª—è:

- `https://supermock.ru`
- `https://api.supermock.ru`

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Check endpoints

- **Frontend**: `https://supermock.ru/`
- **Backend**: `https://api.supermock.ru/api/health`
- **API Info**: `https://api.supermock.ru/api`

### –õ–æ–≥–∏

–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ Dokploy:

- Project ‚Üí Service ‚Üí Logs
- Real-time streaming –¥–æ—Å—Ç—É–ø–µ–Ω

## üö® Troubleshooting

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ DATABASE_URL
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ database —Å–µ—Ä–≤–∏—Å–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å Telegram

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å TELEGRAM_TOKEN
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend –¥–ª—è –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### SSL –ø—Ä–æ–±–ª–µ–º—ã

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω—ã —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –≤ Traefik
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è DNS propagation

### Zero Downtime Deployment

Health checks –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç zero downtime:

- –ù–æ–≤—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- –¢—Ä–∞—Ñ–∏–∫ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è health checks
- –°—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ

Push –≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –≤–µ—Ç–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –¥–µ–ø–ª–æ–π.

### –†—É—á–Ω—ã–µ

–í Dokploy –ø–∞–Ω–µ–ª–∏: Service ‚Üí Deploy ‚Üí Manual Deploy

## üìà Scaling

–î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

1. **Resources**: —É–≤–µ–ª–∏—á—å—Ç–µ CPU/Memory –ª–∏–º–∏—Ç—ã
2. **Replicas**: —É–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
3. **Database**: —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–Ω–µ—à–Ω—é—é PostgreSQL

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Production –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

1. **–°–º–µ–Ω–∏—Ç–µ JWT_SECRET** –Ω–∞ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–π –∫–ª—é—á
2. **–û–±–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS** –¥–ª—è production –¥–æ–º–µ–Ω–æ–≤
4. **–í–∫–ª—é—á–∏—Ç–µ rate limiting** (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

### Backup

–†–µ–≥—É–ª—è—Ä–Ω–æ –¥–µ–ª–∞–π—Ç–µ backup:

- PostgreSQL –¥–∞–Ω–Ω—ã—Ö –∏–∑ `/files/postgres-data`
- –õ–æ–≥–æ–≤ –∏–∑ `/files/backend-logs`

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health checks endpoints
4. –ö–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–π—Ç–µ—Å—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π Dokploy

---

## ‚úÖ Checklist —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

- [ ] Dokploy —Å–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] DNS –∑–∞–ø–∏—Å–∏ –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Telegram bot —Å–æ–∑–¥–∞–Ω –∏ —Ç–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω
- [ ] Shared Variables –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ Dokploy
- [ ] Docker Compose —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω –∏ —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –î–æ–º–µ–Ω—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ–ª—É—á–µ–Ω—ã
- [ ] Health checks —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- [ ] –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–Ω –∏ –ø–∞—Ä–æ–ª—å –∏–∑–º–µ–Ω–µ–Ω
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

üéâ **–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! SuperMock —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç!**
